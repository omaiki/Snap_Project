show.html.erb

Search Result show page

<button onclick="shoot()" style="width: 64px;border: solid 2px #ccc;">Capture</button><br/>
    <div id="output" style="display: inline-block; top: 4px; position: relative ;border: dotted 1px #ccc; padding: 2px;"></div>
</div>


<style>

body {
    background: white;
}

#c {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 100%;
}

#v {
    position: absolute;
    top: 50%;
    left: 50%;
    margin: -180px 0 0 -240px;
}
</style>


<script>
    var videoId = 'video';
    var scaleFactor = 0.5;
    var snapshots = [];
    /**
 * Captures a image frame from the provided video element.
 *
 * @param {Video} video HTML5 video element from where the image frame will be captured.
 * @param {Number} scaleFactor Factor to scale the canvas element that will be return. This is an optional parameter.
 *
 * @return {Canvas}
 */
    function capture(video, scaleFactor) {
      if(scaleFactor == null){
        scaleFactor = 1;
      }
      var w = video.videoWidth * scaleFactor;
      var h = video.videoHeight * scaleFactor;
      var canvas = document.createElement('canvas');
        canvas.width  = w;
          canvas.height = h;
      var ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, w, h);
        return canvas;
    }
    function shoot() {
      var video  = document.getElementById(videoId);
      var output = document.getElementById('output');
      var canvas = capture(video, scaleFactor);
        canvas.onclick = function(){
          window.open(this.toDataURL());
        };
      snapshots.unshift(canvas);
      output.innerHTML = '';
      for(var i=0; i<4; i++){
        output.appendChild(snapshots[i]);
      }
    }
  </script>